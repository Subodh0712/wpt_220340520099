<html>
<body>
<!-- 
<form action="poc2" method="get">
<Br/>
whocares<input type="text" name="whocares"/>
<input type="submit" value="get"/>
</form>


<form action="poc1" method="post">
<Br/>whocares<input type="text" name="whocares"/>
<input type="submit" value="post"/>
</form> -->


Book id  <input type="text" name="bookid" id="bookid">
<span id="msg"> Message</span><br>
Book Name  <input type="text" name="bookname" id="bookname"><br>
Price  <input type="text" name="price" id="price"><br>
<button id="b2"> update book</button>


</body>




<script src="jquery-3.5.1.min.js"></script>
<script>//our scrip will come here 



// $(document).ready(function()
// {
// console.log("no more sins");
// });


$(()=>

$("#bookid").blur (()=>{

	let input = {bookid:$("#bookid").val()}
		let ajaxparametrs1={
			data:input,
			url:"http://localhost:8081/allbookdetails",
			type:'get',
			datatype:'json',
			succsess:()=>{

				
				if(output.status){
                            
                            $("#bookname").val(output.allbookdetails.bookname);  
                            $("#price").val(output.allbookdetails.price);  
                        
                        }else {
                            $("#bookname").val("");
                            $("#price").val("");
                           
                        }

			},
			error:()=>
			{

				
				console.log("server not connected----Pleasse connect to server" ) 


			}

		}

		$.ajax(ajaxparameters1);

});






$("#b2").click( () =>
{ 
		// console.log("jquery works");
		// alert("jquery works");

		let input = {
			bookid:$("#bookid").val(),
			bookname:$("#bookname").val(),
			price:$("#price").val()

		};
		
		let ajaxparameters2 ={
			data:input,
			url:"http://locahost:8081/updatebook",
			type:'get',
			datatype:'json',
			success:(getserverdata)=>
			{
				if(getserverdata.status===true)
				{
					console.log("Book updated successfully");
					$("#msg").text("Book updated successfully");
					
				}
				else {
					console.log("Book is not updated");
					$("#msg").text("Book is not updated");
				}
			},
			error:(gettingErrorFromServer)=>
			{
				console.log("Server side error"+ gettingErrorFromServer);
				$("#msg").text("Server side error");
			}
			
		}
		$.ajax(ajaxparameters2);
		


	});
	

 });

</script>


</html>